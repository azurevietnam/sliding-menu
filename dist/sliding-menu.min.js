/*!
 * Sliding Menu Plugin 0.1.0
 * http://github.danielcardoso.net/sliding-menu/
 *
 * Authored by Daniel Cardoso
 * https://github.com/DanielCardoso
 *
 * Copyright 2014, Daniel Cardoso
 * @license : The MIT License (MIT)
 * http://opensource.org/licenses/MIT
 */
if("undefined"==typeof jQuery)throw new Error("Sliding Menu requires jQuery");!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";var t,a;t=window.SlidingMenu||{},a=window.slidingMenuUsedIds||[],t.VERSION="0.1.0",t.TRANSITION_DURATION=200,t.CLASS="sliding-menu",t.DEFAULTS={dataJSON:!1,initHref:!1,backLabel:"Back"},t.init=function(a,n){var i,r,s,l,d;return i=e(a),i.hasClass(t.CLASS)?void 0:(r=n.dataJSON?t.processJSON(n.dataJSON):t.process(i),i.empty().addClass(t.CLASS),e(r).each(n.dataJSON?function(t,a){var n;n=e("<ul></ul>"),a.root&&(l="#"+a.id),n.attr("id",a.id),n.addClass("menu-panel"),e(a.children).each(function(t,a){var i,r;i=e("<a></a>"),i.attr("class",a.styleClass),i.attr("href",a.href),i.text(a.label),r=e("<li></li>"),r.append(i),n.append(r)}),i.append(n)}:function(t,a){var n;n=e(a),n.hasClass("menu-panel-root")&&(l="#"+n.attr("id")),i.append(a)}),l=e(l),l.addClass("menu-panel-root"),d=l,i.height(l.height()),e("a",i).on("click",function(a){var r,s;if(r=e(this).attr("href"),s=e(this).text(),n.initHref!==!1&&(d=e("#"+e(r).closest("ul").attr("id")),n.initHref=!1),0===r.indexOf("#menu-panel")){var l,c;a.preventDefault(),l=e(r),c=e(this).hasClass("back"),e(".back",l).text(n.backLabel===!0?s:n.backLabel),d.attr("id")!==l.attr("id")?(d.stop(!0,!0).animate({left:c?"100%":"-100%"},t.TRANSITION_DURATION),l.stop(!0,!0).css("left",c?"-100%":"100%").animate({left:0},t.TRANSITION_DURATION),i.stop(!0,!0).animate({height:l.height()},t.TRANSITION_DURATION)):(l.css({left:0}),i.height(l.height())),d=l}else i.find("li.active").removeClass("active"),e(this).closest("li").addClass("active")}),n.initHref!==!1?(s=i.find('a[href="'+n.initHref+'"]'),0!==s.length?(s.closest("li").addClass("active"),i.find('a[href="'+t.getPanelLinker(i,n.initHref)+'"]').trigger("click")):(n.initHref=!1,d.css("left",0))):d.css("left",0),this)},t.getPanelLinker=function(t,a){var n;return n="#"+e(t).find('a[href="'+a+'"]').closest("ul").attr("id")},t.process=function(a){var n,i;return n=e("ul",a),i=[],e(n).each(function(n,r){var s,l,d;if(s=e(r),l=s.prev(),d=t.getNewId(),1===l.length&&l.addClass("nav").attr("href","#menu-panel-"+d),s.attr("id","menu-panel-"+d),0===n)s.addClass("menu-panel-root");else{s.addClass("menu-panel");var c=e("<li></li>"),f=e("<a></a>").addClass("back").attr({href:t.getPanelLinker(a,"#menu-panel-"+d)});c.append(f),s.prepend(c)}i.push(r)}),i},t.processJSON=function(a,n){var i={id:"menu-panel-"+t.getNewId(),children:[],root:n?!1:!0},r=[];return n&&i.children.push({styleClass:"back",href:"#"+n.id}),e(a).each(function(e,a){if(i.children.push(a),a.children){var n;n=t.processJSON(a.children,i),a.href="#"+n[0].id,a.styleClass="nav",r=r.concat(n)}}),[i].concat(r)},t.getNewId=function(){var e;do e=Math.random().toString(36).substring(3,8);while(a.indexOf(e)>=0);return a.push(e),e},e.fn.slidingMenu=function(a){this.each(function(){var n;n=e.extend({},t.DEFAULTS,a),t.init(this,n)})}});